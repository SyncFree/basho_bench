%% This configuration is intened to benchmark antidote with protocol buffer interface.
%% The important parameters are as follows:
%% not exploit the real throughput of the system, while too high concurrency will over-stress
%% the system and trigger timeouts. The suggested number is about 0.
%%
%% {mode, max|{rate, integer()}}: how frequent a thread should send request. Use 'max' for benchmarking.
%% If you are debugging, maybe {rate, N} can be useful, which means each thread sends N reqs per second.
%%
%% {operations, [payment]}.
%% Current operations: read, append, append_multiple(update nine consecutive keys in a transaction),
%% read_all_write_one(read N consecutive keys and randomly pick one key to update, N is the number of 
%% antidote nodes. The assumption is that each node is assumed to have only one partition and the hash
%% fun should be integer()%N).
%% 
%% to benchmark.
%% 
%% For more information, please check : http://docs.basho.com/riak/latest/ops/building/benchmarking/
{mode, max}.

{duration, 100}.
{concurrent, 10}.
{master_to_sleep, 23500}.
{to_sleep, 2960}.
{specula, true}.
{process_time, 0}.
{retry, true}.

{driver, basho_bench_driver_micro}.

{key_generator, {pareto_int, 20000}}.
{value_generator, {fixed_bin, 10}}.

{operations, [{txn, 10}]}.
{pattern, true}.
%%{operations, [{new_order,1}]}.
%%{operations, [{order_status,1}]}.

{cdf, false}.

{prob_access, t}.

{deter, false}.
{local_hot_range, 30000}.
{local_hot_rate, 10}.
{remote_hot_range, 500}.
{remote_hot_rate, 10}.
{remote_hot_range, 500}.
{remote_hot_rate, 10}.

{centralized, true}.
{all_nodes, ['54.170.69.222','54.216.42.168','54.155.20.235','54.147.200.154','54.89.102.99','54.83.158.67','52.199.70.111','52.199.153.108','52.193.207.253','35.156.149.55','35.156.0.67','35.156.19.50','54.193.86.120','52.53.180.154','54.67.58.85','52.221.246.119','54.179.171.133','54.251.167.40','35.163.210.104','35.166.197.238','35.166.157.50','13.54.184.46','13.54.175.197','13.54.185.240','52.78.51.72','52.78.209.140','52.79.103.223']}.
{auto_tune, true}.
{tune_period, 2}.
{tune_sleep, 1}.

{consistency, si}.

{total_key, 10}.
{total_read, 0}.
{master_num, 80}.
{slave_num, 20}.
{cache_num, 0}.
{max_len, 0}.
%{master_num, 80}.
%{slave_num, 20}.
%{cache_num, 0}.

{master_range, 2000000}.
{slave_range, 2000000}.
{cache_range, 1000000}.

%% the second element in the list below (e.g., "../../public/bitcask")
%% must point to % the relevant directory of a bitcask installation
{code_paths, ["../antidote/ebin"]}.

{antidote_cookie, antidote}.

{antidote_mynode, ['micro@34.254.96.76',longnames]}.
{antidote_types, [{riak_dt_pncounter, [increment, decrement]}]}.
%%{antidote_pb_ips, ['antidote@34.254.96.76']}.
{antidote_pb_ips, ['antidote@34.254.96.76']}.
